<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="ft-connection-detail-item.html">

<!--
`ft-connection-details`
An element that shows properties of a given FileThis connection resource

@demo demo/index.html
-->

<dom-module id="ft-connection-details">

    <style include="iron-flex iron-flex-alignment"></style>

    <template>

        <div class="layout vertical center" style="background-color:white">

            <div class="layout vertical"
                 style="padding-top:60px; padding-top:40px;">

                <!-- Nickname -->
                <ft-connection-detail-item name="Nickname" value="[[connection.name]]" name-width="100"></ft-connection-detail-item>
                <div style="height:30px;"></div>

                <!-- Category -->
                <ft-connection-detail-item name="Category" value="[[_typeDisplayName(_source.type)]]" name-width="100"></ft-connection-detail-item>
                <div style="height:30px;"></div>

                <!-- Website -->
                <ft-connection-detail-item name="Website" value="[[_source.homePageUrl]]" name-width="100"></ft-connection-detail-item>
                <div style="height:30px;"></div>

                <!-- Phone Number -->
                <ft-connection-detail-item name="Phone Number" value="[[_source.phone]]" name-width="100"></ft-connection-detail-item>
                <div style="height:30px;"></div>

                <!-- Last Refresh -->
                <ft-connection-detail-item name="Last Refresh" value="[[connection.checkedDate]]" name-width="100"></ft-connection-detail-item>
                <div style="height:30px;"></div>

                <!-- Last Fetch -->
                <ft-connection-detail-item name="Last Fetch" value="[[connection.successDate]]" name-width="100"></ft-connection-detail-item>
                <div style="height:30px;"></div>

            </div>
        </div>

    </template>

    <script>
        Polymer({

            is: 'ft-connection-details',

            properties: {
                connection:
                {
                    type: Object,
                    value: null,
                    notify: true,
                    observer: "_onConnectionChanged"
                },
                sources:
                {
                    type: Array,
                    notify: true,
                    value: []
                },
                _source:
                {
                    type: Object,
                    notify: true,
                    value: null
                }
            },
            
            _onConnectionChanged: function()
            {
                this._source = this._findSource(this.connection);
            },

            _findSource: function(connection)
            {
                if (connection == null)
                    return null;
                var sourceId = connection.sourceId;
                var count = this.sources.length;
                for (var index = 0; index < count; index++)
                {
                    var source = this.sources[index];
                    if (source.id == sourceId)
                        return source;
                }
                return null;
            },

            _TYPE_FINANCIAL: "fina",
            _TYPE_UTILITY: "util",
            _TYPE_TEST: "test",

            _typeDisplayName: function(type)
            {
                switch (type)
                {
                    case this._TYPE_FINANCIAL:
                        return "Financial";
                    case this._TYPE_UTILITY:
                        return "Utility";
                    case this._TYPE_TEST:
                        return "Test";
                    default:
                        return "";
                }
            }

        });
    </script>
</dom-module>
